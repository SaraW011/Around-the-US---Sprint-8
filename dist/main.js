!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n}var n,r;return n=t,(r=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e,e.validationMessage):this._showInputError(e,e.validationMessage)}},{key:"_getInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_toggleButtonState",value:function(e){this._getInvalidInput(e)?this.disableSubmitButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList,e._buttonElement)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._template=n,this._handleCardClick=r}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return this._template.querySelector(".elements__element").cloneNode(!0)}},{key:"_handleLikeImage",value:function(){this._cardElement.querySelector(".elements__heart").classList.toggle("elements__heart_active")}},{key:"_handleDeleteCard",value:function(){this._cardElement.remove(),this._cardElement=null}},{key:"_addEventListeners",value:function(){var e=this;this._cardElement.querySelector(".elements__heart").addEventListener("click",(function(){e._handleLikeImage()})),this._cardElement.querySelector(".elements__trash").addEventListener("click",(function(){e._handleDeleteCard()})),this._cardElement.querySelector(".elements__image").addEventListener("click",(function(){e._handleCardClick(e._link,e._name)}))}},{key:"render",value:function(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".elements__text").textContent=this._name,this._cardElement.querySelector(".elements__image").style.backgroundImage="url(".concat(this._link,")"),this._addEventListeners(),this._cardElement}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_handleEscClose",(function(e){"Escape"==e.key&&n.close()})),i(this,"_handleOverlayClose",(function(e){(e.target.classList.contains("modal_open")||e.target.classList.contains("modal__image-wrapper"))&&n.close()})),this._popup=t}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this._handleOverlayClose)}},{key:"close",value:function(){this._popup.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("click",this._handleOverlayClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".modal__close-button").addEventListener("click",(function(){e.close()}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},s.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function d(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e,t){var n,r,o,l,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l=function(e){return n._handleFormSubmit(n._getInputValues())},(o="handleFormSubmit")in(r=m(n=i.call(this,e)))?Object.defineProperty(r,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[o]=l,n._handleFormSubmit=t,n._form=n._popup.querySelector(".form"),n._inputFieldValues={},n._inputList=function(e){if(Array.isArray(e))return u(e)}(c=n._form.querySelectorAll(".form__input"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList.forEach((function(t){e._inputFieldValues[t.name]=t.value})),this._inputFieldValues}},{key:"setEventListeners",value:function(){s(y(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this.handleFormSubmit)}},{key:"close",value:function(){s(y(a.prototype),"close",this).call(this),this._form.reset()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e,t){v(k(a.prototype),"open",this).call(this),this._link=e,this._name=t,this._popup.querySelector(".modal__image-caption").textContent=this._name;var n=this._popup.querySelector(".modal__image-container");n.src=this._link,n.alt=this._name}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._itemsRendered=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"renderer",value:function(){var e=this;this._itemsRendered.forEach((function(t){e._element=e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){var n=t.userNameElement,r=t.userJobElement;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=n,this._userJobElement=r}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){return this._userData={name:this._userNameElement.textContent,job:this._userJobElement.textContent},this._userData}},{key:"setUserInfo",value:function(e){var t=e.inputName,n=e.inputJob;this._userNameElement.textContent=t,this._userJobElement.textContent=n}}],n&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),P=document.querySelector(".modal_type_edit-profile"),q=document.querySelector(".modal_type_add-place"),I=document.querySelector(".modal_type_preview-image"),B=document.querySelector(".form-add-place"),R=document.querySelector(".form-change-profile"),x=document.querySelector(".profile__name"),T=document.querySelector(".profile__title"),V=document.querySelector(".form__input_type_name"),A=document.querySelector(".form__input_type_job"),D=document.querySelector(".profile__edit-button"),N=document.querySelector(".profile__add-button"),F=document.querySelector(".elements__list"),J=document.querySelector(".elements-template").content,U={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},M=new j({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:$},J);M.renderer();var Y=new S(I);function $(e){var t=new r(e,J,z);F.prepend(t.render())}function z(e,t){Y.open(e,t)}Y.setEventListeners();var G=new _(q,(function(e){var t=$({name:e.place,link:e.link});M.addItem(t),G.close()}));G.setEventListeners();var H=new C({userNameElement:x,userJobElement:T}),K=new _(P,(function(e){H.setUserInfo({inputName:e.name,inputJob:e.job}),K.close()}));K.setEventListeners();var Q=new t(U,B);Q.enableValidation(),new t(U,R).enableValidation(),D.addEventListener("click",(function(){var e;K.open(),e=H.getUserInfo(),V.value=e.name,A.value=e.job})),N.addEventListener("click",(function(){G.open(),Q.disableSubmitButton()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLS0tc3ByaW50LTgvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMtLS1zcHJpbnQtOC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy0tLXNwcmludC04Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy0tLXNwcmludC04Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLS0tc3ByaW50LTgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9hcm91bmQtdGhlLXVzLS0tc3ByaW50LTgvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMtLS1zcHJpbnQtOC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMtLS1zcHJpbnQtOC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kLXRoZS11cy0tLXNwcmludC04Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL2Fyb3VuZC10aGUtdXMtLS1zcHJpbnQtOC8uL3NyYy91dGlscy9pbml0aWFsQ2FyZHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVmaW5lIGlucHV0IGZpZWxkJ3MgYmVoYXZpb3IgZGVwZW5kaW5nIG9uIHRoZSBmaWVsZCdzIHZhbGlkaXR5LlxuXG4vLyBTZWxlY3QgYWxsIGZvcm0gZWxlbWVudHMgYW5kIGFzc2lnbiB0aGVtIHRvIHZhcmlhYmxlczpcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihmaWVsZHNldCwgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gZmllbGRzZXQuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGZpZWxkc2V0LnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBmaWVsZHNldC5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGZpZWxkc2V0LmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZmllbGRzZXQuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgLy8gIzE6IEZpbmQgdGhlIGVycm9yIGVsZW1lbnRcblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gdmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvLyAjMjogaGlkZSBhbmQgcmVzZXQgdGhlIGVycm9yIGVsZW1lbnRcblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgLy8jMzogY2hlY2sgaWYgZmllbGQgaXMgdmFsaWRcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0SW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIC8vZGlzYWJsZSBzdWJtaXQgYnV0dG9uIGFmdGVyIGluaXRpYWwgc3VibWl0OlxuXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgLy8gdG9nZ2xlIGJ1dHRvbiBzdGF0ZSBhZnRlciBjaGVja2luZyB2YWxpZGl0eVxuICAvLyAtLT4oISkgaW1wcm92ZTogY29uc2lkZXIgbWV0aG9kIHJlc2V0VmFsaWRhdGlvbigpIGZvciBjbGVhcmluZyBlcnJvcnNcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0KSB7XG4gICAgaWYgKHRoaXMuX2dldEludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vRW5hYmxlIHZhbGlkYXRpb24gZm9yIGFsbCBmb3JtczpcblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgLy90aGlzLl9saWtlQ2FyZCA9IHRoaXMuX3RlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2hlYXJ0XCIpXG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0aGlzLl90ZW1wbGF0ZVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2VsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJbWFnZSgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2hlYXJ0XCIpIC8vdG8gZml4OiBzZWxlY3Qgb25jZSBpbiBjb25zdHJ1Y3RvciBhbmQgcmUtdXNlXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRzX19oZWFydF9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19oZWFydFwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJbWFnZSgpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RyYXNoXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO1xuICAgICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuZWxlbWVudHNfX2ltYWdlXCJcbiAgICApLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgO1xuXG4gICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LmtleTtcbiAgICBpZiAoa2V5ID09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZU92ZXJsYXlDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuXCIpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKGBtb2RhbF9faW1hZ2Utd3JhcHBlcmApXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuLy9ubyBsb25nZXIgbmVjZXNzYXJ5LCBub3QgYmVpbmcgdXNlZDpcbi8vICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4vLyAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5cIik7XG4vLyAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuLy8gICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuLy8gICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0RmllbGRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpXTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9pbnB1dEZpZWxkVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICByZXR1cm4gdGhpcy5faW5wdXRGaWVsZFZhbHVlcztcbiAgfVxuXG4gIGhhbmRsZUZvcm1TdWJtaXQgPSAoZSkgPT4ge1xuICAgIC8vIGUucHJldmVudERlZmF1bHQoKTsgLy8gbm8gbG9uZ2VyIGFmZmVjdGluZyBhbnl0aGluZyBcbiAgICBjb25zdCBuZXdDYXJkSW5wdXQgPSB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIHJldHVybiBuZXdDYXJkSW5wdXQ7XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLmhhbmRsZUZvcm1TdWJtaXQpO1xuICB9IFxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgfVxuXG4gIG9wZW4obGluaywgbmFtZSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTsgLy9kZWZpbmUgaW4gY29uc3RydWN0b3JcblxuICAgIC8vc2VsZWN0IHRoZSBET00gZWxlbWVudCBvbmNlIGFuZCByZXVzZSBpdDpcbiAgICBjb25zdCBpbWFnZVByZXZpZXcgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jb250YWluZXJcIik7IC8vZGVmaW5lIGluIGNvbnN0cnVjdG9yXG4gICAgaW1hZ2VQcmV2aWV3LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgaW1hZ2VQcmV2aWV3LmFsdCA9IHRoaXMuX25hbWU7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcbiAgICAgIHRoaXMuX2l0ZW1zUmVuZGVyZWQgPSBpdGVtcztcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuICBcbiAgICByZW5kZXJlcigpIHtcbiAgICAgIHRoaXMuX2l0ZW1zUmVuZGVyZWQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIFxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuICB9ICBcblxuLy8gICBub3RlIGZvciBpbXByb3ZlbWVudCBcbi8vICAgbWFrZSByZW5kZXJlciBhIGdlbmVyaWMgZnVuY3Rpb24gb25seSBmb3IgY3JlYXRpbmcgYSBjYXJkICh3aXRob3V0IGFkZGluZyBpdCB0byB0aGUgRE9NKSBcbi8vICAgYW5kIHRoZW4geW91IGNvdWxkIGNyZWF0ZSBjYXJkcyBpbnNpZGUgdGhlIGNsYXNzIFxuLy8gICBzbyB5b3Ugd291bGQgbm90IGJvdGhlciB5b3Vyc2VsZiBhYm91dCBjcmVhdGluZyB0aGVtIGluIGluZGV4LmpzIGluIDIgcGxhY2VzIC0+IGNsZWFuZXIgY29kZVxuIFxuLy8gICBhZGRJdGVtKGl0ZW0pIHtcbi8vICAgICAgY29uc3QgY2FyZCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pXG4vLyAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmQpO1xuLy8gICAgfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZUVsZW1lbnQsIHVzZXJKb2JFbGVtZW50IH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSB1c2VyTmFtZUVsZW1lbnQ7XG4gICAgdGhpcy5fdXNlckpvYkVsZW1lbnQgPSB1c2VySm9iRWxlbWVudDtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX3VzZXJEYXRhID0ge1xuICAgICAgLy8gdGhpcy51c2VyTmFtZSA9IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgIC8vIHRoaXMudXNlckpvYiA9IHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgam9iOiB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLl91c2VyRGF0YTtcbiAgICAvLyByZXR1cm4geyB1c2VyTmFtZSwgdXNlckpvYiB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBpbnB1dE5hbWUsIGlucHV0Sm9iIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dE5hbWU7XG4gICAgdGhpcy5fdXNlckpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEpvYjtcbiAgfVxufSIsIi8vIHdyYXBwZXIgbW9kYWxzXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF90eXBlX2VkaXQtcHJvZmlsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZE5ld1BsYWNlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX3R5cGVfYWRkLXBsYWNlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX3R5cGVfcHJldmlldy1pbWFnZVwiXHJcbik7XHJcblxyXG4vLyB3cmFwcGVyIGZvcm1zXHJcbmV4cG9ydCBjb25zdCBwbGFjZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tYWRkLXBsYWNlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY2hhbmdlLXByb2ZpbGVcIik7XHJcblxyXG4vLyBwcm9maWxlIG5hbWUgYW5kIGluZm86XHJcbmV4cG9ydCBjb25zdCB1c2VyTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCB1c2VySm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcblxyXG4vLyBpbnB1dCBkYXRhIGZpZWxkcyBpbiBmb3Jtc1xyXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19pbnB1dF90eXBlX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBpbnB1dEpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9qb2JcIik7XHJcblxyXG4vL25vIGxvbmdlciBpbiB1c2UsIHVzZSBodG1sIGlucHV0IFwibmFtZVwiIHZhbHVlcyBpbnN0ZWFkXHJcbi8vIGV4cG9ydCBjb25zdCBpbnB1dFBsYWNlID0gYWRkTmV3UGxhY2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfcGxhY2VcIik7XHJcbi8vIGV4cG9ydCBjb25zdCBpbnB1dExpbmsgPSBhZGROZXdQbGFjZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9saW5rXCIpO1xyXG5cclxuLy8gYnV0dG9uc1xyXG5leHBvcnQgY29uc3Qgb3BlblByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZE5ld1BsYWNlUG9wdXBCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG4vLyBwbGFjZSAtIGVsZW1lbnRzIC0gdGVtcGxhdGVcclxuZXhwb3J0IGNvbnN0IHBsYWNlc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saXN0XCIpOyAvL3VsIG9mIHBsYWNlIGNhcmRzXHJcbmV4cG9ydCBjb25zdCBwbGFjZVRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50cy10ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5cclxuLy8qKi0tPj4gRk9STSBWQUxJREFUSU9OIFNFVFRJTkdTIDw8LS0qL1xyXG5cclxuLy8gQXNzaWduIGZvcm0gZWxlbWVudHMgdG8gdmFyaWFibGVzOlxyXG4vL2V4cG9ydCBjb25zdCBmb3JtU2VsZWN0b3IgPSBcIi5mb3JtXCI7IG1vdmVkIHRvIENsYXNzIFBvcHVwXHJcbmV4cG9ydCBjb25zdCBmaWVsZHNldCA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl92aXNpYmxlXCIsXHJcbn07IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IGluaXRpYWxDYXJkcyBmcm9tIFwiLi4vdXRpbHMvaW5pdGlhbENhcmRzLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG5pbXBvcnQge1xuICBlZGl0UHJvZmlsZVBvcHVwLFxuICBhZGROZXdQbGFjZVBvcHVwLFxuICBwcmV2aWV3SW1hZ2VQb3B1cCxcbiAgcGxhY2VGb3JtLFxuICBwcm9maWxlRm9ybSxcbiAgdXNlck5hbWVFbGVtZW50LFxuICB1c2VySm9iRWxlbWVudCxcbiAgaW5wdXROYW1lLFxuICBpbnB1dEpvYixcbiAgb3BlblByb2ZpbGVFZGl0QnV0dG9uLFxuICBhZGROZXdQbGFjZVBvcHVwQnV0dG9uLFxuICBwbGFjZXNMaXN0LFxuICBwbGFjZVRlbXBsYXRlLFxuICBmaWVsZHNldCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyoqLS0+PiBSRU5ERVIgSU5JVElBTCBQTEFDRSBDQVJEUyA8PC0tKi9cblxuLy8+Pj4+Pj4+Pj4+Pj4+Pj4+IHNlcGFyYXRlZCB0aGUgZnVuY3Rpb24gYmVsb3c6XG5jb25zdCBlbGVtZW50c0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gIH0sXG4gIHBsYWNlVGVtcGxhdGVcbik7XG5cbmVsZW1lbnRzTGlzdC5yZW5kZXJlcigpO1xuXG4vLyBwbGFjZSBpbml0aWFsQ2FyZHM6XG4vLyBjb25zdCBlbGVtZW50c0xpc3QgPSBuZXcgU2VjdGlvbihcbi8vICAge1xuLy8gICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4vLyAgICAgcmVuZGVyZXI6IChlbGVtZW50KSA9PiB7XG4vLyAgICAgICBjb25zdCBuZXdFbGVtZW50ID0gcmVuZGVyQ2FyZChlbGVtZW50KTtcbi8vICAgICAgIGVsZW1lbnRzTGlzdC5hZGRJdGVtKG5ld0VsZW1lbnQpO1xuLy8gICAgIH0sXG4vLyAgIH0sXG4vLyAgIHBsYWNlVGVtcGxhdGVcbi8vICk7XG4vLyBlbGVtZW50c0xpc3QucmVuZGVyZXIoKTtcblxuLy9wcmV2aWV3IGltYWdlOlxuY29uc3QgcHJldmlld0ltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHByZXZpZXdJbWFnZVBvcHVwKTtcbnByZXZpZXdJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLz4+Pj4+Pj4+Pj4+Pj4+Pj4gc2VwYXJhdGVkIHRoZSBmdW5jdGlvbiBiZWxvdzpcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgcGxhY2VUZW1wbGF0ZSwgaGFuZGxlSW1hZ2VQcmV2aWV3KTtcbiAgcGxhY2VzTGlzdC5wcmVwZW5kKGNhcmQucmVuZGVyKCkpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZVByZXZpZXcobGluaywgbmFtZSkge1xuICBwcmV2aWV3SW1hZ2Uub3BlbihsaW5rLCBuYW1lKTtcbn1cblxuLy8gZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XG4vLyAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBwbGFjZVRlbXBsYXRlLCAobGluaywgbmFtZSkgPT5cbi8vICAgICAvL25vdGUhID0+IGJpbmRzIFwib3BlblwiIHRvIG9yaWdpbmFsIHRoaXMuX3BvcHVwIHJhdGhlciB0aGFuIHRvIHNjb3BlIChDbGFzcyBcIkNhcmRcIilcbi8vICAgICBwcmV2aWV3SW1hZ2Uub3BlbihsaW5rLCBuYW1lKVxuLy8gICApO1xuXG4vLyAgIHBsYWNlc0xpc3QucHJlcGVuZChjYXJkLnJlbmRlcigpKTtcbi8vIH1cblxuLy8qKi0tPj4gRk9STVMgPDwtLSovXG5cbi8vYWRkIGNhcmQgZm9ybTpcbmNvbnN0IGFkZFBsYWNlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShhZGROZXdQbGFjZVBvcHVwLCBzdWJtaXROZXdQbGFjZUZvcm0pO1xuYWRkUGxhY2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL09ubHkgbWV0aG9kIF9nZXRJbnB1dFZhbHVlcyBjb2xsZWN0cyBkYXRhIGlucHV0cyxcbi8vdXNlIHRoZSBjb2xsZWN0ZWQgZGF0YSByYXRoZXIgdGhhbiB0aGUgaW5wdXRzOlxuXG5mdW5jdGlvbiBzdWJtaXROZXdQbGFjZUZvcm0oZGF0YSkge1xuICBjb25zdCBpbnNlcnRQbGFjZSA9IHJlbmRlckNhcmQoXG4gICAgLy8gbmFtZTogaW5wdXRQbGFjZS52YWx1ZSxcbiAgICAvLyBsaW5rOiBpbnB1dExpbmsudmFsdWUsXG5cbiAgICAvL2h0bWwgaW5wdXQgXCJuYW1lXCIgdmFsdWVzXG4gICAgeyBuYW1lOiBkYXRhLnBsYWNlLCBsaW5rOiBkYXRhLmxpbmsgfVxuICApO1xuXG4gIGVsZW1lbnRzTGlzdC5hZGRJdGVtKGluc2VydFBsYWNlKTtcbiAgYWRkUGxhY2VQb3B1cC5jbG9zZSgpO1xufVxuXG4vL2NoYW5nZSB1c2VyIHByb2ZpbGUgaW5mbyBmb3JtOlxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHVzZXJOYW1lRWxlbWVudDogdXNlck5hbWVFbGVtZW50LFxuICB1c2VySm9iRWxlbWVudDogdXNlckpvYkVsZW1lbnQsXG59KTtcblxuY29uc3QgcHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdFByb2ZpbGVQb3B1cCwgc3VibWl0UHJvZmlsZUZvcm0pO1xucHJvZmlsZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIHN1Ym1pdFByb2ZpbGVGb3JtKGRhdGEpIHtcbiAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpOyAvL21vdmVkIHRvIGNsYXNzXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKFxuICAgIC8vaHRtbCBpbnB1dCBcIm5hbWVcIiB2YWx1ZXNcbiAgICB7IGlucHV0TmFtZTogZGF0YS5uYW1lLCBpbnB1dEpvYjogZGF0YS5qb2IgfVxuXG4gICAgLy8gaW5wdXROYW1lOiBpbnB1dE5hbWUudmFsdWUsXG4gICAgLy8gaW5wdXRKb2I6IGlucHV0Sm9iLnZhbHVlLFxuICApO1xuICBwcm9maWxlTW9kYWwuY2xvc2UoKTtcbn1cblxuLy8tLS0tPj4+Pj4+ICBob2xkcyBpbml0aWFsIHZhbHVlcyBpbnNpZGUgcHJvZmlsZSBmb3JtIHdoZW4gb3BlbjpcbmZ1bmN0aW9uIGN1cnJlbnRQcm9maWxlTmFtZSgpIHtcbiAgLy9ub3RlISAtLT4gIHRleHRDb250ZW50IHNob3VsZG4ndCBiZSB1c2VkIGhlcmUgdG8gZ2V0IHRoZSBwcm9maWxlIGRhdGEsXG4gIC8vIG9ubHkgZ2V0VXNlckluZm8gc2hvdWxkIGRvIHRoYXQ6XG5cbiAgLy8gY29uc3QgdXNlck5hbWUgPSB1c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XG4gIC8vIGNvbnN0IHVzZXJKb2IgPSB1c2VySm9iRWxlbWVudC50ZXh0Q29udGVudDtcblxuICAvLyBpbnB1dE5hbWUudmFsdWUgPSB1c2VyTmFtZTtcbiAgLy8gaW5wdXRKb2IudmFsdWUgPSB1c2VySm9iO1xuXG4gIC8vLS0tLS1nZXQgZGF0YSBmcm9tIFVzZXJJbmZvIGNsYXNzOlxuICBjb25zdCBpbnB1dERhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gIGlucHV0TmFtZS52YWx1ZSA9IGlucHV0RGF0YS5uYW1lO1xuICBpbnB1dEpvYi52YWx1ZSA9IGlucHV0RGF0YS5qb2I7XG5cbiAgLy9jYWxsIEAgZXZlbnRMaXN0ZW5lclxufVxuLy88PDw8PDwtLS0tXG5cbi8vKiotLT4+IEVOQUJMRSBGT1JNIFZBTElEQVRJT04gPDwtLSovXG5cbmNvbnN0IHBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZpZWxkc2V0LCBwbGFjZUZvcm0pO1xucGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmaWVsZHNldCwgcHJvZmlsZUZvcm0pO1xucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyoqLS0+PiBFVkVOVCBMSVNURU5FUlMgPDwtLSovXG5cbm9wZW5Qcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwcm9maWxlTW9kYWwub3BlbigpO1xuICBjdXJyZW50UHJvZmlsZU5hbWUoKTtcbn0pO1xuXG5hZGROZXdQbGFjZVBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZFBsYWNlUG9wdXAub3BlbigpO1xuICBwbGFjZUZvcm1WYWxpZGF0b3IuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xufSk7IiwiLy9jb250ZW50IG9mIGNhcmRzIGluIG9yaWdpbmFsIHZlcnNpb246XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLCAgXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiXG4gICAgfVxuICBdO1xuXG4gIGV4cG9ydCBkZWZhdWx0IGluaXRpYWxDYXJkczsiXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImZpZWxkc2V0IiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dExpc3QiLCJzb21lIiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIl9nZXRJbnZhbGlkSW5wdXQiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJlIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwiY2FyZERhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsImNsb25lTm9kZSIsIl9jYXJkRWxlbWVudCIsInRvZ2dsZSIsIl9oYW5kbGVMaWtlSW1hZ2UiLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9nZXRUZW1wbGF0ZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJwb3B1cCIsImV2ZW50Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9wb3B1cCIsImRvY3VtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2hhbmRsZU92ZXJsYXlDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXBTZWxlY3RvciIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtIiwiX2lucHV0RmllbGRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsImltYWdlUHJldmlldyIsInNyYyIsImFsdCIsIlNlY3Rpb24iLCJjb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zUmVuZGVyZWQiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsIl9lbGVtZW50IiwicHJlcGVuZCIsIlVzZXJJbmZvIiwidXNlck5hbWVFbGVtZW50IiwidXNlckpvYkVsZW1lbnQiLCJfdXNlck5hbWVFbGVtZW50IiwiX3VzZXJKb2JFbGVtZW50IiwiX3VzZXJEYXRhIiwiam9iIiwiaW5wdXROYW1lIiwiaW5wdXRKb2IiLCJlZGl0UHJvZmlsZVBvcHVwIiwiYWRkTmV3UGxhY2VQb3B1cCIsInByZXZpZXdJbWFnZVBvcHVwIiwicGxhY2VGb3JtIiwicHJvZmlsZUZvcm0iLCJvcGVuUHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdQbGFjZVBvcHVwQnV0dG9uIiwicGxhY2VzTGlzdCIsInBsYWNlVGVtcGxhdGUiLCJjb250ZW50IiwiZWxlbWVudHNMaXN0IiwicmVuZGVyQ2FyZCIsInByZXZpZXdJbWFnZSIsImRhdGEiLCJjYXJkIiwiaGFuZGxlSW1hZ2VQcmV2aWV3IiwicmVuZGVyIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkUGxhY2VQb3B1cCIsImluc2VydFBsYWNlIiwicGxhY2UiLCJhZGRJdGVtIiwidXNlckluZm8iLCJwcm9maWxlTW9kYWwiLCJzZXRVc2VySW5mbyIsInBsYWNlRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJpbnB1dERhdGEiLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=